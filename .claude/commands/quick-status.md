# /quick-status

## 概要
プロジェクト全体の進捗状況、ブロッカー、次のアクション候補を一覧表示するコマンド

## 引数
なし (全体状況を確認)

## 設定・環境変数
- `KIRO_SPECS_DIR`: 仕様書ディレクトリ (デフォルト: `.kiro/specs/multi-project-dashboard`)
- `KIRO_STEERING_DIR`: ステアリングディレクトリ (デフォルト: `.kiro/steering`)
- `TASKS_FILE`: タスクファイル名 (デフォルト: `tasks.md`)

## 実行内容

### 1. プロジェクト基本情報の収集
- 現在のブランチ確認: `git branch --show-current`
- Git状態確認: `git status --porcelain`
- 最新コミット: `git log -1 --oneline`
- 未プッシュコミット数: `git rev-list origin/develop..HEAD --count`

### 2. タスク進捗分析
- `${KIRO_SPECS_DIR}/${TASKS_FILE}` からタスク一覧を読み込み
- 完了タスク数と未完了タスク数の集計
- 進捗率の計算 (完了/全体 × 100%)
- ブロッカータスクの特定 (依存関係で進められないタスク)
- 並行実行可能タスクの特定

### 3. 開発状況の確認
- アクティブなタスクブランチ一覧: `git branch --list "task-*"`
- 未マージプルリクエスト: `gh pr list --state open`
- 最近のレビュー状況: `/reviews` ディレクトリの確認
- 実装ログの確認: `_docs/implement-tasks/` の最新ファイル

### 4. 品質状況チェック
- 未コミットファイル数
- テスト実行状況 (package.jsonから判断)
- ビルドエラーの有無 (可能であれば)

## 出力形式

```
🎯 プロジェクト進捗サマリー
📅 {現在日時}

📊 タスク進捗
完了: {完了数}/{総数} ({進捗率}%)
├─ ✅ 完了済みタスク: {完了タスク一覧}
├─ 🔄 進行中: Task {現在のタスク}
├─ ⏳ 次候補: {次に実行可能なタスク一覧}
└─ 🚫 ブロック中: {ブロッカーがあるタスク一覧}

🔧 開発状況
現在のブランチ: {ブランチ名}
未コミット変更: {ファイル数}ファイル
未プッシュコミット: {コミット数}件
アクティブブランチ: {task-*ブランチ一覧}

📋 レビュー・プルリクエスト
オープンPR: {PR数}件
未適用レビュー: {レビューファイル数}件

💡 推奨次アクション
1. {具体的なアクション1}
2. {具体的なアクション2}
3. {具体的なアクション3}
```

### 5. 次アクション提案ロジック

#### 未コミット変更がある場合
```
💾 コミット推奨
現在の変更をコミットすることをお勧めします。
→ git add . && git commit -m "作業内容"
```

#### 実行可能なタスクがある場合
```
🚀 次のタスク実行可能
Task {番号}: {タスク説明}
→ /implement-task {番号}
```

#### レビューが必要な場合
```
👀 レビュー対応推奨
未適用のレビューフィードバックがあります。
→ /apply-review-results
```

#### プルリクエスト作成可能な場合
```
📤 PR作成可能
完了したタスクがあります。
→ /create-pull-request {タスク番号}
```

### 6. エラーハンドリング

#### タスクファイルが存在しない場合
```
❌ タスクファイルが見つかりません
パス: ${KIRO_SPECS_DIR}/${TASKS_FILE}

プロジェクト初期化が必要かもしれません。
以下を確認してください:
1. .kiro/specs ディレクトリの存在
2. tasks.md ファイルの存在
```

#### Gitリポジトリでない場合
```
❌ Gitリポジトリが初期化されていません
git init を実行してください。
```

#### GitHub CLI未認証の場合
```
⚠️  GitHub CLI未認証のため、PR情報は取得できませんでした
認証するには: gh auth login
```

## 使用例
```bash
# 基本的な進捗確認
/quick-status

# 詳細情報付き
/quick-status --verbose

# 特定の情報のみ表示
/quick-status --tasks-only
```

## 実行タイミング
- 開発セッション開始時
- タスク完了後
- 迷った時の現状確認
- 定期的な進捗把握

## 活用方法
- **朝の開発開始時**: 前日からの変更点と今日のタスクを確認
- **タスク完了後**: 次に何をすべきかの判断材料
- **週次レビュー**: 進捗の客観的把握
- **チーム共有**: プロジェクト状況の簡潔な報告

## 出力ファイル
- 進捗レポート: `_docs/status/status-{YYYYMMDD-HHMMSS}.md` (オプション)
- 進捗履歴の蓄積により傾向分析が可能

## 特徴
- **瞬時の状況把握**: 1コマンドでプロジェクト全体を俯瞰
- **行動指針の提示**: 次に何をすべきかを具体的に提案
- **ブロッカーの早期発見**: 依存関係の問題を即座に特定
- **進捗の可視化**: 数値とビジュアルで進捗を実感